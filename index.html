<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gerenciamento de Notas</title>
    <!-- Carregando Tailwind CSS para Estiliza√ß√£o R√°pida e Responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Configura√ß√£o de Fontes e Classes de Estilo Adicionais */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb; /* Fundo suave */
        }
        /* Estiliza√ß√£o espec√≠fica para Aprovado/Reprovado (Personaliza√ß√£o e Destaque) */
        .status-aprovado {
            background-color: #d1fae5; /* Verde claro */
            color: #065f46; /* Verde escuro para texto */
            font-weight: 600;
        }
        .status-reprovado {
            background-color: #fee2e2; /* Vermelho claro */
            color: #991b1b; /* Vermelho escuro para texto */
            font-weight: 600;
        }
        /* Efeito hover sutil nas linhas da tabela */
        #tabelaAlunos tbody tr:hover {
            background-color: #eef2f6;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-4xl mx-auto bg-white shadow-xl rounded-2xl p-6 md:p-10">
        <!-- T√≠tulo Principal do Sistema -->
        <h1 class="text-3xl md:text-4xl font-extrabold text-center mb-8 text-indigo-700">
            üìä Sistema de Notas
        </h1>

        <!-- Formul√°rio de Cadastro de Aluno -->
        <section id="cadastro" class="mb-10 p-6 border border-gray-200 rounded-xl bg-gray-50 shadow-md">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">Novo Aluno</h2>
            <form id="formCadastro" class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                <!-- Campo Nome do Aluno -->
                <div class="md:col-span-2">
                    <label for="nome" class="block text-sm font-medium text-gray-700 mb-1">Nome do Aluno</label>
                    <input type="text" id="nome" required 
                           class="w-full p-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                
                <!-- Campo Nota 1 -->
                <div>
                    <label for="nota1" class="block text-sm font-medium text-gray-700 mb-1">Nota 1 (0-10)</label>
                    <input type="number" id="nota1" min="0" max="10" step="0.01" required 
                           class="w-full p-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                
                <!-- Campo Nota 2 -->
                <div>
                    <label for="nota2" class="block text-sm font-medium text-gray-700 mb-1">Nota 2 (0-10)</label>
                    <input type="number" id="nota2" min="0" max="10" step="0.01" required 
                           class="w-full p-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                </div>

                <!-- Bot√£o para Adicionar Aluno -->
                <button type="submit" 
                        class="md:col-span-4 lg:col-span-1 py-2 px-4 bg-indigo-600 text-white font-semibold rounded-lg 
                                hover:bg-indigo-700 transition duration-200 shadow-md transform active:scale-95">
                    ‚ûï Adicionar Aluno
                </button>
            </form>
            <p id="mensagemErro" class="text-red-500 mt-3 hidden text-sm font-medium">
                Por favor, preencha todos os campos corretamente (notas entre 0 e 10).
            </p>
        </section>

        <!-- Tabela de Resultados -->
        <section id="resultados">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">Resultados Cadastrados</h2>
            <div class="overflow-x-auto shadow-lg rounded-xl border border-gray-100">
                <table class="min-w-full divide-y divide-gray-200" id="tabelaAlunos">
                    <thead class="bg-indigo-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-bold text-indigo-700 uppercase tracking-wider">Aluno</th>
                            <th class="px-6 py-3 text-left text-xs font-bold text-indigo-700 uppercase tracking-wider">Nota 1</th>
                            <th class="px-6 py-3 text-left text-xs font-bold text-indigo-700 uppercase tracking-wider">Nota 2</th>
                            <th class="px-6 py-3 text-left text-xs font-bold text-indigo-700 uppercase tracking-wider">M√©dia</th>
                            <th class="px-6 py-3 text-left text-xs font-bold text-indigo-700 uppercase tracking-wider">Resultado</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-100">
                        <!-- Linhas dos alunos ser√£o inseridas aqui pelo JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div id="statusVazio" class="text-center p-6 text-gray-500 italic mt-4">
                Nenhum aluno cadastrado. Use o formul√°rio acima para come√ßar.
            </div>
        </section>

    </div>

    <!-- Se√ß√£o de L√≥gica JavaScript -->
    <script>
        // Vari√°veis globais para armazenar os dados e o limite de aprova√ß√£o
        let listaAlunos = [];
        const LIMITE_APROVACAO = 6.0;
        const STORAGE_KEY = 'cadastroAlunos';

        // Elementos do DOM
        const form = document.getElementById('formCadastro');
        const tabelaBody = document.querySelector('#tabelaAlunos tbody');
        const mensagemErro = document.getElementById('mensagemErro');
        const statusVazio = document.getElementById('statusVazio');

        /**
         * Carrega os dados dos alunos armazenados no localStorage.
         */
        function carregarAlunos() {
            const dadosSalvos = localStorage.getItem(STORAGE_KEY);
            if (dadosSalvos) {
                try {
                    listaAlunos = JSON.parse(dadosSalvos);
                } catch (e) {
                    console.error("Erro ao carregar dados do localStorage:", e);
                    listaAlunos = [];
                }
            }
            renderizarTabela();
        }

        /**
         * Salva a lista de alunos atual no localStorage.
         */
        function salvarAlunos() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(listaAlunos));
        }

        /**
         * Calcula a m√©dia e determina o status (Aprovado/Reprovado).
         * @param {number} nota1 - Primeira nota.
         * @param {number} nota2 - Segunda nota.
         * @returns {object} - Objeto contendo a m√©dia formatada e o status.
         */
        function calcularResultado(nota1, nota2) {
            const media = (nota1 + nota2) / 2;
            const status = media >= LIMITE_APROVACAO ? 'Aprovado' : 'Reprovado';
            return {
                media: media.toFixed(2), // Formata para 2 casas decimais
                status: status
            };
        }

        /**
         * Renderiza a tabela de alunos com os dados atuais.
         */
        function renderizarTabela() {
            tabelaBody.innerHTML = ''; // Limpa as linhas existentes

            if (listaAlunos.length === 0) {
                statusVazio.classList.remove('hidden');
                return;
            } else {
                statusVazio.classList.add('hidden');
            }

            listaAlunos.forEach(aluno => {
                const resultado = calcularResultado(aluno.nota1, aluno.nota2);
                const classeStatus = resultado.status === 'Aprovado' ? 'status-aprovado' : 'status-reprovado';

                const newRow = tabelaBody.insertRow();
                newRow.className = 'whitespace-nowrap'; // Garante que a linha n√£o quebre em telas pequenas

                // C√©lula Nome
                let cell = newRow.insertCell();
                cell.textContent = aluno.nome;
                cell.className = 'px-6 py-3 text-sm font-medium text-gray-900';

                // C√©lula Nota 1
                cell = newRow.insertCell();
                cell.textContent = aluno.nota1.toFixed(2);
                cell.className = 'px-6 py-3 text-sm text-gray-500';

                // C√©lula Nota 2
                cell = newRow.insertCell();
                cell.textContent = aluno.nota2.toFixed(2);
                cell.className = 'px-6 py-3 text-sm text-gray-500';

                // C√©lula M√©dia
                cell = newRow.insertCell();
                cell.textContent = resultado.media;
                cell.className = 'px-6 py-3 text-sm font-medium';

                // C√©lula Resultado (com destaque visual)
                cell = newRow.insertCell();
                cell.textContent = resultado.status;
                // Aplica a classe CSS para o destaque visual (Crit√©rio de Estiliza√ß√£o)
                cell.className = `px-6 py-3 text-sm font-semibold ${classeStatus} rounded-full text-center`;
            });
        }

        /**
         * Trata o envio do formul√°rio, valida, calcula e adiciona o aluno.
         * @param {Event} event - O evento de submiss√£o do formul√°rio.
         */
        function handleSubmit(event) {
            event.preventDefault();

            const nome = document.getElementById('nome').value.trim();
            const nota1Str = document.getElementById('nota1').value;
            const nota2Str = document.getElementById('nota2').value;

            // Converte e valida os n√∫meros (Boas Pr√°ticas: Valida√ß√£o de Input)
            const nota1 = parseFloat(nota1Str);
            const nota2 = parseFloat(nota2Str);

            // Valida√ß√£o
            if (!nome || isNaN(nota1) || isNaN(nota2) || nota1 < 0 || nota1 > 10 || nota2 < 0 || nota2 > 10) {
                mensagemErro.classList.remove('hidden');
                return;
            } else {
                mensagemErro.classList.add('hidden');
            }

            // Cria o objeto do novo aluno
            const novoAluno = {
                nome: nome,
                nota1: nota1,
                nota2: nota2
            };

            // Adiciona √† lista
            listaAlunos.push(novoAluno);

            // Salva e atualiza a tabela
            salvarAlunos();
            renderizarTabela();

            // Limpa os campos ap√≥s o cadastro (Crit√©rio de Funcionalidade)
            form.reset(); 
            document.getElementById('nome').focus(); // Foco no primeiro campo
        }

        // 1. Inicializa o carregamento dos dados e a renderiza√ß√£o ao carregar a p√°gina
        window.onload = carregarAlunos;

        // 2. Adiciona o listener para o evento de submiss√£o do formul√°rio
        form.addEventListener('submit', handleSubmit);

    </script>
</body>
</html>